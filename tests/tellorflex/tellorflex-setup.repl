(load "../env-setup.repl")

(begin-tx "Deploy Modules and set governance")
(namespace (read-msg "ns"))
(load "../../testing/governance-mock.pact")

(governance-mock.constructor free.tellorflex)
; Check governance address not initialized in tellorflex
(expect-failure "row not found" (free.tellorflex.get-governance-module))
; Input governance address in tellorflex
(tellorflex.init free.governance-mock)
; Additional step that stores governance guard in tellorflex (Owner only)
(governance-mock.call-tellorflex)
; Expect failure when trying to input governance address again
(expect-failure "row found for key" (free.tellorflex.init "governance place holder"))
(commit-tx)
